let v=t=>{let e={},i={},c={dispatch(t,h){if("@dispatch"!==t&&c.dispatch("@dispatch",[t,h,e[t]]),e[t]){let a,p={};e[t].forEach((d=>{let n=e[t].includes(d)&&d(i,h,c);n&&"function"!=typeof n.then&&(a=i={...i,...n},p={...p,...n})})),a&&c.dispatch("@changed",p)}},get:()=>i,on:(t,i)=>((e[t]||(e[t]=[])).push(i),()=>{e[t]=e[t].filter((t=>t!==i))})};return t.forEach((t=>{t&&t(c)})),c.dispatch("@init"),c};export{v as createStoreon};